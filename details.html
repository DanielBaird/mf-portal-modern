<h2><a href="http://danielbaird.com/mf-portal-modern/">Live Demo</a></h2>
<h1>Modernisation of MediaFlux Portals functionality</h1>
<p><a href="http://www.arcitecta.com/Products">MediaFlux</a> includes a Portals
plugin that allows users to create web sites to access their data.</p>
<p>MediaFlux uses <a href="http://www.gwtproject.org/">GWT</a> to create the
Portal pages.  GWT is a reasonable choice for producing
desktop-application-like web pages, but the HTML generated by
GWT is very resistant to styling via CSS.  CSS is the standard way
of formatting web content.</p>
<p>This project aims at re-imagining Portal output as clean, sensible
HTML.</p>
<h2>Strategy</h2>
<p>I've captured the pages generated by MediaFlux for the cat-based
demonstration portal.</p>
<h3>Isolate page components</h3>
<ol>
<li>Identified page &quot;components&quot;, for example:</li>
</ol>
<ul>
<li><strong>Header</strong> is the page header</li>
<li><strong>ListItem</strong> is an item displayed in a list of items</li>
</ul>
<ol>
<li>Extracted HTML for each &quot;component&quot; into separate files</li>
<li>Replaced each component with a reference to the file containing
the extracted HTML for that component</li>
<li>Written a shell script to re-assemble the page by starting with
the main page and replacing file references with the HTML from
that component file</li>
<li>Verifying the assembled page looks like the original</li>
</ol>
<p>This produces a set of files that each represent a page component.</p>
<h3>Replace components with clean versions</h3>
<p>With each component file, I replaced the millions-of-nested-tables
HTML generated by GWT with clean, simple HTML.  The functionality
of the page is verified by re-assembling the page out of components.</p>
<h2>Repo Structure</h2>
<h3>original HTML</h3>
<p><a href="original-gwt-html"><code>original-gwt-html</code></a> directory contains raw
html generated by the current portal plugin, for several Cat Portal
pages including the cat list page.</p>
<h3>Componentised versions</h3>
<p><a href="html-components"><code>html-components</code></a> directory contains three
componentised versions of the cat list page.</p>
<p>The components extracted are indicated in this diagram:</p>
<p><img src="images/components-01.png" alt="components" /></p>
<p>These are my guesses at page entities managed by the GWT code.</p>
<p>Each of the three componentised versions includes a <code>cat-list.source</code>
file that contains the page layout and shows where to include the
component files.  A shell script <code>convert.sh</code> (for
<a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">bash</a>) inserts the
component files into the right places, to produce
<code>cat-list.source.html</code> which is the complete page (this output
is aready in the repo, so you don't need to run the script to see the
result).</p>
<h4>Original version, split into components</h4>
<p><a href="html-components/old"><code>html-components/old</code></a> contains the
original GWT generated HTML, split across several files.  The HTML
is not changed from GWT's generated code, aside from splitting out
components, and a minor path tweak to the Font Awesome path so that
it continues to work without a MF server.</p>
<p>HTML for each component is in the
<a href="html-components/old/components"><code>./components</code></a> directory.</p>
<h4>New version, revising component structure</h4>
<p><a href="html-components/new"><code>html-components/new</code></a> contains the same
files as the componentised original version, but with new content.</p>
<p>New HTML for each component is in the
<a href="html-components/new/components"><code>./components</code></a> directory.</p>
<p>Here's a side-by-side comparison of the menubar component:</p>
<iframe style="width: 40%; height: 300px; float: left;"
	src="https://raw.githubusercontent.com/DanielBaird/mf-portal-modern/gh-pages/html-components/old/components/menubar.html"
/>
<iframe style="width: 40%; height: 300px; float: right;"
	src="https://raw.githubusercontent.com/DanielBaird/mf-portal-modern/gh-pages/html-components/new/components/menubar.html"
/>
